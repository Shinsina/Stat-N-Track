---
import { connectToDatabase } from "$lib/mongodb";
import type { Subsession } from "$lib/types";
import SubsessionsLayout from "$lib/layouts/subsessions.astro";
export function getStaticPaths() {
  return [{ params: { id: 300752 } }, { params: { id: 815162 } }];
}
const { id } = Astro.params;
const dbConnection = await connectToDatabase();
const { db } = dbConnection;
const collection = db.collection<Subsession>("subsessions");
const subsessions = await collection
  .find({
    "session_results.2.results": { $elemMatch: { cust_id: Number(id) } },
  })
  .sort({ _id: -1 })
  .toArray();
---

<SubsessionsLayout {id} {subsessions} />

---
import { connectToDatabase } from "$lib/mongodb";
import StandingsLayout from "$lib/layouts/standings.astro";
import userIds from "$lib/utils/user-ids";
export function getStaticPaths() {
  return userIds.map((id) => ({ params: { id } }));
}
const { id } = Astro.params;
const dbConnection = await connectToDatabase();
const { db } = dbConnection;
const collection = db.collection("standings");
const standingsResults = await collection
  .find({
    "season_driver_data.cust_id": Number(id),
    "season_driver_data.weeks_counted": 8,
  })
  .sort({ season_id: -1 })
  .toArray();
---

<StandingsLayout {id} {standingsResults} />
